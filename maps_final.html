<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <link rel="shortcut icon" href="img/Frame 2.png">
        <link rel="apple-touch-icon" href="img/Frame 2.png">
        <link rel="preconnect" href="https://fonts.gstatic.com" />
        <style>
            @import url('https://fonts.googleapis.com/css2?family=Rubik:wght@400;500;700&display=swap');

            html, body {margin: 0; height: 100%; overflow: hidden}
        </style>
        <link rel="stylesheet" href="queries.css" >
        <link rel="stylesheet" href="styles.css" >
        <title>What's Up Boiler Up</title>

        <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"
        integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY="
        crossorigin=""/>
        <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"
        integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo="
        crossorigin="">
      </script>
      <script src="Control.Geocoder.js"></script>

    </head>
    <body>
      
            <div class="container">
              <header class="navigation">
                <a href="index.html">
                  <img class="logo" alt="What's Up Logo logo" src="img/Frame 2.png" />
                </a>
          
                <nav class="main-nav">
                  <ul class="main-nav-list">
                    <li><a class="main-nav-link" href="index.html">Home</a></li>
                    <li><a class="main-nav-link" href="maps_final.html">Map</a></li>
                    <li><a class="main-nav-link" href="#">Filters</a></li>
                    <li><a class="main-nav-link" href="About.html">About</a></li>
                  </ul>
                </nav>
              </header>
          </div>
          <div id="map">
           <script>

var final_array = [['MGC NMO Fall \'23', '9/17/2023', '9/17/2023', '12:00:00 PM', '2:00:00 PM', '40.42748238976761, -86.91316990396933', 'New member orientation! We welcome the crossing c… to know the MGC and how to be successful in it.', 'https://boilerlink.purdue.edu/event/9236637'],
 ['Hello World 2023', '9/16/2023', '9/17/2023', '8:00:00 AM', '2:00:00 PM', '40.42829584, -86.91285408', 'Purdue\'s annual freshman-only hackathon returns this fall!', 'https://boilerlink.purdue.edu/event/9367293'],
 ['Medieval Society Dance Practice', '9/17/2023', '9/17/2023', '1:00:00 PM', '3:00:00 PM', '40.4248736, -86.9132974', 'This is a dance practice for the Medieval Society…16th centuries across Europe will be rehearsed. ', 'https://boilerlink.purdue.edu/event/9102733'],
['Creative Writing Club of Purdue - Sunday Meeting', '9/17/2023', '9/17/2023', '1:00:00 PM', '3:00:00 PM', '40.423476, -86.9180072', 'Our weekly Sunday meeting. Swing by for a dedicat…, time for your own projects, and great company.', 'https://boilerlink.purdue.edu/event/9226096'],
 ['a2f Sunday Gathering', '9/17/2023', '9/17/2023', '9:00:00 AM', '4:00:00 PM', '40.4275869, -86.9169208', 'Sunday gathering', 'https://boilerlink.purdue.edu/event/9293890'],
['Riot Games In-Houses', '9/17/2023', '9/17/2023', '2:00:00 PM', '5:00:00 PM', '40.42802158, -86.91611017', 'A Co-hosted event with the Purdue League of Legen…both the clubs! This includes 5v5 custom games, ', 'https://boilerlink.purdue.edu/event/9111607'],
['Purdue T.T. Club Weekly Sessions', '9/17/2023', '9/17/2023', '3:00:00 PM', '5:00:00 PM', '40.4282417, -86.9223556', 'The Purdue Table Tennis Club strives for continuo… the club by making a platform available to all.', 'https://boilerlink.purdue.edu/event/9148382'],
 ['Parkour Workout', '9/17/2023', '9/17/2023', '4:00:00 PM', '5:00:00 PM', '40.42802158, -86.91611017', 'A parkour workout hosted by the Parkour and Calis… 2 workouts. Sundays have only level 1 workouts.', 'https://boilerlink.purdue.edu/event/9196110'],
['Fall Fury Regatta ', '9/15/2023', '9/17/2023', '3:00:00 PM', '5:00:00 PM', '40.42829584, -86.91285408', 'To attend the Fall Fury regatta hosted by Univers…Friday) and return by Sep 17 (Sunday) afternoon.', 'https://boilerlink.purdue.edu/event/9373751'],
['MCSA Single Hand Championship', '9/15/2023', '9/17/2023', '3:00:00 PM', '5:00:00 PM', '40.4264038, -86.9143489', 'This regatta will occur from Sep 16-17. Sailors will leave on Sep 15 (Friday) for ', 'https://boilerlink.purdue.edu/event/9373758'],
['MCSA Single Hand Championship', '9/15/2023', '9/17/2023', '3:00:00 PM', '5:00:00 PM', '40.4264038, -86.9143489', 'This regatta will occur from Sep 16-17. Sailors will leave on Sep 15 (Friday) for ', 'https://boilerlink.purdue.edu/event/9373759'],
 ['Show at SMWC', '9/16/2023', '9/17/2023', '7:00:00 AM', '5:00:00 PM', '40.42802158, -86.91611017', 'Team members will travel to Saint Mary of the Woods College for the weekend to compete. ', 'https://boilerlink.purdue.edu/event/9376020'],
['Corn-Cup', '9/16/2023', '9/17/2023', '7:00:00 AM', '5:00:00 PM', '40.42802158, -86.91611017', 'Frisbee tournament in Indianapolis ', 'https://boilerlink.purdue.edu/event/9395110'],
 ['Purdue Karate Club and Sigma Kappa Self Defense Event', '9/17/2023', '9/17/2023', '6:30:00 PM', '8:30:00 PM', '40.4274852, -86.9214651', 'A self-defense collaboration event between the Sigma Kappa sorority and the Purdue Karate Club.', 'https://boilerlink.purdue.edu/event/9370905'],
['Health & Safety Initiative - Fall 2023', '9/17/2023', '9/17/2023', '5:00:00 PM', '9:00:00 PM', '40.42802158, -86.91611017', 'This will be community wide FSCL programming put …lly, mentally, and emotionally is prioritized.  ', 'https://boilerlink.purdue.edu/event/9201968']]



 
                var map = L.map('map').setView([40.427075, -86.920077], 16);
                L.tileLayer('https://tile.openstreetmap.org/{z}/{x}/{y}.png', {
                maxZoom: 20,
                minZoom: 15,
                attribution: '&copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a>'
                }).addTo(map);
                x = window.innerWidth;
                y = window.innerHeight;
                document.getElementById("map").style.height = (y).toString() + "px";
                document.getElementById("map").style.width = (x).toString() + "px";
                map.invalidateSize();

                var myIcon = L.icon({iconUrl: 'img/Frame 2.png', iconSize: [50, 50]});
                latitudes = [];
                longitudes = [];
                for(i = 0; i < final_array.length; i++){
                    latitudes.push(parseFloat(final_array[i][5].substring(0, final_array[i][5].indexOf(","))));
                    longitudes.push(parseFloat(final_array[i][5].substring(final_array[i][5].indexOf(" ") + 1, final_array[i][5].length)));
                }
                var markers = [];
                var popups = [];
                for(var i = 0; i < final_array.length; i++){
                    var mark = L.marker([latitudes[i], longitudes[i]], {icon: myIcon});
                    markers.push(mark);
                    markers[i].addTo(map);

                    var popupOptions = {className: "event-box", autoPan: true, closeButton: false};
                    var customDescription = ` <figure class="event">
                    <div class="event-box">
                      <h2>` + final_array[i][0] + `</h2>
                    <ul class="event-details">
              <li>
                <svg
                  xmlns="http://www.w3.org/2000/svg"
                  class="event-icon"
                  fill="none" 
                  viewBox="0 0 24 24"
                  stroke="currentColor"
                >
                  <path
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    stroke-width="2"
                    d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"
                  />
                </svg>
                <!-- Span is a generic INLINE text element, it doesn't have any meaning. It's like a div element, but inline -->
                <span>` + final_array[i][3] + " - " + final_array[i][4] + `</span>
              </li>
              <li>
              <svg
                  xmlns="http://www.w3.org/2000/svg"
                  class="event-icon"
                  fill="none"
                  viewBox="0 0 24 24"
                  stroke="currentColor"
                >
                  <path
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    stroke-width="2"
                    d="M3.055 11H5a2 2 0 012 2v1a2 2 0 002 2 2 2 0 012 2v2.945M8 3.935V5.5A2.5 2.5 0 0010.5 8h.5a2 2 0 012 2 2 2 0 104 0 2 2 0 012-2h1.064M15 20.488V18a2 2 0 012-2h3.064M21 12a9 9 0 11-18 0 9 9 0 0118 0z"
                  />
                </svg>
                <span>` + final_array[i][1] + " - " + final_array[i][2] +  `</span>
              </li>
              <li>
                                <span>` + final_array[i][6] + `</span>
              </li>
            
                    </ul>
                   <div class="event-info">
              <a href=" ` +  final_array[i][7] + ` " class="btn btn--small">Learn More</a>
                    </div>
                    </div>
                    </figure>
                    `;
                    markers[i].bindPopup(customDescription,popupOptions).openPopup();
                    //var title_tag = document.getElementsByTagName("h3")[i];
                    //title_tag.innerHTML = title;
                    
                    //var markerLayer = marker.bindPopup(customDescription,popupOptions);
                    //markerLayer.openPopup();

                    //var markerLayer = marker.bindPopup(customDescription,popupOptions);
                    //popups.push(markerLayer);
                  }
                  //var markerLayer = marker.bindPopup(customDescription,popupOptions);
                  //markerLayer.openPopup();
                  /*let isClicked = false;
                    markerLayer.on({
                        mouseover: function() {
                        if(!isClicked) {
                        this.openPopup()
                        }
                      },
                    mouseout: function() { 
                        if(!isClicked) {
                        this.closePopup()
                        }
                      },
                    click: function() {
                    isClicked = true
                    this.openPopup()
                    }})
                    mymap.on({
                    
                        click: function() {
                        isClicked = false
                        },
                        popupclose: function () {
                        isClicked = false
                        }
                      })*/
            </script>
        </div>
        <script>
        var x, y = 0;
        window.onresize = function(event) {
            x = window.innerWidth;
            y = window.innerHeight;
            document.getElementById("map").style.height = (y).toString() + "px";
            document.getElementById("map").style.width = (x).toString() + "px";
        }
        </script>
        <script>
          
        
    </body>
</html>